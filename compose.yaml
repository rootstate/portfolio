services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    develop:
      watch:
      - action: sync
        path: ./backend
        target: ./code
  
  frontend:
    build: ./frontend
    ports: ["3000:80"]
    volumes:
      - ./frontend/nginx.conf:/etc/nginx/nginx.conf:ro
    develop:
      watch:
      - action: sync
        path: ./frontend
        target: /usr/share/nginx/html

  redis: 
    image: redis:7-alpine
    volumes:
      - redis-data:/data
  
volumes:
  redis-data: